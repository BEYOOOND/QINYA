# 安装说明

## Python 版本要求

**推荐使用 Python 3.10 或 3.11**（最稳定，兼容性最好）

如果使用 Python 3.14，可能会遇到以下问题：
- 某些包可能还没有为 Python 3.14 提供预编译的二进制文件
- 需要从源码编译某些依赖包
- 可能遇到兼容性问题

## 安装步骤

### 方法一：使用推荐版本（Python 3.10 或 3.11）

1. **安装 Python 3.10 或 3.11**
   - 从 [Python 官网](https://www.python.org/downloads/) 下载
   - 或使用 Anaconda/Miniconda

2. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

### 方法二：使用 Python 3.14（如果必须）

1. **更新 pip 和构建工具**
   ```bash
   python -m pip install --upgrade pip
   pip install --upgrade setuptools wheel
   ```

2. **安装依赖（使用最新版本）**
   ```bash
   pip install -r requirements_py314.txt
   ```

   如果遇到编译错误，可能需要安装 C++ 编译工具：
   - Windows: 安装 [Visual Studio Build Tools](https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2022)
   - 选择 "C++ build tools" 工作负载

3. **如果 PyQt5 安装失败，尝试：**
   ```bash
   pip install PyQt5 --no-binary PyQt5
   ```
   注意：这需要从源码编译，可能需要较长时间

4. **如果 opencv-python 安装失败，尝试：**
   ```bash
   pip install opencv-python-headless
   ```

## 常见错误及解决方案

### 错误：subprocess-exited-with-error

**原因：**
- Python 版本太新，包没有预编译版本
- 缺少编译工具（C++ 编译器）

**解决方案：**

1. **降级到 Python 3.10 或 3.11（推荐）**
   ```bash
   # 使用 conda 创建新环境
   conda create -n video_processor python=3.11
   conda activate video_processor
   pip install -r requirements.txt
   ```

2. **或者安装编译工具（Windows）**
   - 下载并安装 [Microsoft C++ Build Tools](https://visualstudio.microsoft.com/visual-cpp-build-tools/)
   - 重启命令行
   - 重新运行安装命令

3. **或者使用预编译的 wheel 文件**
   ```bash
   # 尝试从 PyPI 下载最新的 wheel
   pip install --upgrade pip
   pip install --only-binary :all: -r requirements_py314.txt
   ```

### 错误：ModuleNotFoundError

**解决方案：**
```bash
pip install --upgrade pip
pip install -r requirements.txt --force-reinstall
```

### 错误：numpy 安装失败

**解决方案：**
```bash
# 先安装 numpy 的依赖
pip install setuptools wheel
pip install numpy
```

## 验证安装

运行以下命令验证所有包是否安装成功：

```bash
python -c "import cv2; import numpy; import PIL; import PyQt5; print('所有包安装成功！')"
```

## 推荐配置

- **Python 版本**: 3.10 或 3.11
- **操作系统**: Windows 10/11
- **内存**: 至少 4GB RAM
- **磁盘空间**: 至少 500MB（用于安装包和打包）

